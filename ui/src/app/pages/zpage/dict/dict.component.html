<div class="normal-table-wrap">
  <nz-card class="m-b-10 full-height" nzHoverable [nzBodyStyle]="{ 'padding-bottom': 0 }">
    <form nz-form>
      <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
        <div nz-col [nzLg]="12" [nzMd]="12" [nzSm]="24" [nzXl]="12" [nzXs]="24" [nzXXl]="12">
          <nz-form-item>
            <nz-form-control>
              <input name="nameLike" nz-input placeholder="请输入字典名称或编码" [(ngModel)]="searchParam.nameLike"/>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="text-right p-0 m-b-10" nz-col [nzLg]="12" [nzMd]="12" [nzSm]="24" [nzXl]="12" [nzXs]="24"
             [nzXXl]="12">
          <button nz-button [nzType]="'primary'" (click)="getDataList({ pageIndex: 1 })">
            <i nz-icon nzType="search"></i>
            搜索
          </button>
          <button class="m-l-15" nz-button (click)="resetForm()">
            <i nz-icon nzTheme="outline" nzType="close-circle"></i>
            重置
          </button>
          <button class="m-l-15" nz-button (click)="add()">
            <i nz-icon nzTheme="outline" nzType="plus-circle"></i>
            新增
          </button>
        </div>
      </div>
    </form>
  </nz-card>
  <nz-card class="m-b-10 full-height" nzHoverable [nzBodyStyle]="{ 'padding-bottom': 0 }">
    <nz-table #nestedTable [nzData]="dataList" [nzPageSize]="10" [nzBordered]="true" [nzOuterBordered]="true">
      <thead>
      <tr>
        <th>#</th>
        <th>Code</th>
        <th>Name</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
        @for (data of nestedTable.data; track data.id) {
          <tr>
            <td [nzExpand]="expandId === data.id" (nzExpandChange)="expandChange($event, data.id)"></td>
            <td>{{ data.code }}</td>
            <td>{{ data.name }}</td>
            <td>
              <span class="operate-text" (click)="addItem(data.id)">添加数据项</span>
              <span class="operate-text" (click)="del([data.id])">删除</span>
            </td>
          </tr>
          <tr [nzExpand]="expandId === data.id">
            <nz-table #innerTable [nzData]="dataList2" nzSize="middle" [nzShowPagination]="false">
              <thead>
              <tr>
                <th>Label</th>
                <th>Value</th>
                <th>Action</th>
              </tr>
              </thead>
              <tbody>
                @for (data of innerTable.data; track data.id) {
                  <tr>
                    <td>{{ data.label }}</td>
                    <td>{{ data.value }}</td>
                    <td>
                      <span class="operate-text">修改</span>
                      <span class="operate-text">删除</span>
                    </td>
                  </tr>
                }
              </tbody>
            </nz-table>
          </tr>
        }
      </tbody>
    </nz-table>
  </nz-card>
</div>
